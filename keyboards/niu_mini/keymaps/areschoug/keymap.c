#include QMK_KEYBOARD_H
#include "keymap_swedish.h"

#define _BASE   0
#define _LOWER  1
#define _RAISE  2
#define _NUM    3
#define _FN     4
#define _ADJ    5

#define KC_AA SE_AA
#define KC_AE SE_AE
#define KC_OE SE_OSLH

enum custom_keycodes {
    PLACEHOLDER = SAFE_RANGE,
    R_TILDE,
    R_CIRC,
    R_GRV
};

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

    /* BASE
     * ,-----------------------------------------------------------------------------------------------.
     * | Esc   |   Q   |   W   |   E   |   R   |   T   |   Y   |   U   |   I   |   O   |   P   |  Å    |
     * |-------+-------+-------+-------+-------+---------------+-------+-------+-------+-------+-------|
     * | Tab   |   A   |   S   |   D   |   F   |   G   |   H   |   J   |   K   |   L   |   Ö   |  Ä    |
     * |-------+-------+-------+-------+-------+---------------+-------+-------+-------+-------+-------|
     * | Shift |   Z   |   X   |   C   |   V   |   B   |   N   |   M   |   ,   |   .   |   -   | Shift |
     * |-------+-------+-------+-------+-------+---------------+-------+-------+-------+-------+-------|
     * | Ctrl  |  Opt  | _NUM  |  CMD  | Lower |     Space     | Lower | Space |  _NUM |  _ADJ |  _FN  |
     * `-----------------------------------------------------------------------------------------------'
     */
    [_BASE] = LAYOUT_planck_mit(
        KC_ESC,             KC_Q,    KC_W,     KC_E,    KC_R,                KC_T, KC_Y,    KC_U,               KC_I,    KC_O,    KC_P,    KC_AA,
        LT(_RAISE, KC_TAB), KC_A,    KC_S,     KC_D,    KC_F,                KC_G, KC_H,    KC_J,               KC_K,    KC_L,    KC_OE,   KC_AE,
        KC_LSFT,            KC_Z,    KC_X,     KC_C,    KC_V,                KC_B, KC_N,    KC_M,               KC_COMM, KC_DOT,  SE_MINS,  RSFT_T(KC_ENT),
        KC_LCTL,            KC_LCMD, MO(_NUM), KC_LALT, LT(_LOWER, KC_BSPC), CMD_T(KC_SPC), LT(_NUM, KC_ENT), KC_SPC,  MO(_NUM), MO(_ADJ), MO(_FN)
    ),

    /* LOWER
     * ,-----------------------------------------------------------------------------------------------.
     * |       |   !   |   @   |   {   |   }   |   |   |   +   |    \  |    '  |   ;   |   =   |       |
     * |-------+-------+-------+-------+-------+---------------+-------+-------+-------+-------+-------|
     * |       |   #   |   $   |   (   |   )   |   `   |   *   |    /  |    "  |   :   |   ?   |       |
     * |-------+-------+-------+-------+-------+-------|-------+-------+-------+-------+-------+-------|
     * |       |   %   |   ^   |   [   |   ]   |   ~   |   -   |   <   |    >  |   &   |   _   |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       |       |       |       |               |       |       |       |       |       |
     * `-----------------------------------------------------------------------------------------------'
     */
    [_LOWER] = LAYOUT_planck_mit(
        _______, SE_EXLM,  SE_AT,    SE_LCBR_MAC,  SE_RCBR_MAC,  SE_PIPE_MAC,  SE_PLUS,  SE_BSLS_MAC, SE_QUOT,     SE_SCLN,  SE_EQL,   _______,
        _______, SE_HASH,  SE_DLR,   SE_LPRN,      SE_RPRN,      R_GRV,        SE_ASTR,  SE_SLSH,     SE_DQUO,     SE_COLN,  SE_QUES,  _______,
        _______, SE_PERC,  R_CIRC,   SE_LBRC,      SE_RBRC,      R_TILDE,      SE_MINS,  SE_LESS_MAC, SE_GRTR_MAC, SE_AMPR,  SE_UNDS,  _______,
        _______, _______,  _______,  _______,      _______,           _______,       _______,  _______,  _______,  _______,  _______
    ),

    /* RAISE
     * ,-----------------------------------------------------------------------------------------------.
     * |       |       |       |       |       |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       |       |       |       |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       |       |       |       |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       |       |       |       |               |       |       |       |       |       |
     * `-----------------------------------------------------------------------------------------------'
     */
    [_RAISE] = LAYOUT_planck_mit(
        _______, _______, _______, _______, _______, _______, _______, _______, KC_UP, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______, KC_LEFT, KC_DOWN, KC_RIGHT, _______, _______,
        _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, KC_DEL ,     _______,      _______, _______, _______, _______, _______
    ),

    /* NUM
     * ,-----------------------------------------------------------------------------------------------.
     * |       |   1   |   2   |   3   |   4   |   5   |   6   |   7   |   8   |   9   |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       |       |       |       |       |       |   6   |   5   |   4   |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       |       |       |       |       |       |   1   |   2   |   3   |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       | _NUM  |       |       |               |   0   |   0   |       |       |       |
     * `-----------------------------------------------------------------------------------------------'
     */
    [_NUM] = LAYOUT_planck_mit(
        _______, KC_1,    KC_2,    KC_3,    KC_4,    KC_5,    KC_6,    KC_7, KC_8, KC_9, KC_0,   _______,
        _______, _______, _______, _______, _______, _______, _______, KC_4, KC_5, KC_6, _______, _______,
        _______, _______, _______, _______, _______, _______, _______, KC_1, KC_2, KC_3, _______, _______,
        _______, _______, _______, _______, _______,     _______,      KC_0, KC_0, _______, _______, _______
    ),


    /* FN
     * ,-----------------------------------------------------------------------------------------------.
     * |       |  F1   |  F2   |  F3   |  F4   |  F5   |  F6   |   F7  |   F8  |  F9   |  F10  |  F11  |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |  F4   |  F5   |  F6   |       |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |  F7   |  F8   |  F9   |       |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |  F10  |  F11  |  F12  |       |               |       |       |       |       |       |
     * `-----------------------------------------------------------------------------------------------'
     */
    [_FN] = LAYOUT_planck_mit(
        _______, KC_F1,  KC_F2,  KC_F3,  KC_F4,   KC_F5,   KC_F6,   KC_F7,   KC_F8,   KC_F9,   KC_F10,  KC_F11,
        _______, KC_F4,  KC_F5,  KC_F6,  _______, _______, _______, _______, _______, _______, _______, KC_F12,
        _______, KC_F7,  KC_F8,  KC_F9,  _______, _______, _______, _______, _______, _______, _______, _______,
        _______, KC_F10, KC_F11, KC_F12, _______,     _______,      _______, _______, _______, _______, _______
    ),

    /* _ADJ
     * ,-----------------------------------------------------------------------------------------------.
     * |       |       |       |       |       |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |  RGB  |  HUE+ |  SAT+ |  VI+  |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |RGBMOD |  HUE- |  SAT- |  VI-  |       |       |       |       |       |       |       |
     * |-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------|
     * |       |       |       |       |       |               |       |       |       |       |       |
     * `-----------------------------------------------------------------------------------------------'
     */
    [_ADJ] = LAYOUT_planck_mit(
        _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
        _______, RGB_TOG, RGB_HUI, RGB_SAI, RGB_VAI, RGB_SPI, _______, _______, _______, _______, _______, _______,
        _______, RGB_MOD, RGB_HUD, RGB_SAD, RGB_VAD, RGB_SPD, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,     _______,      _______, _______, _______, _______, _______
    ),
    
};


void matrix_init_user(void) {
}

void matrix_scan_user(void) {
}


bool process_record_user(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        case R_TILDE:
            if (record->event.pressed) {
                SEND_STRING(SS_RALT("]") " ");
            }
            break;
        case R_CIRC:
            if (record->event.pressed) {
                SEND_STRING(SS_RALT("}") " ");
            }
            break;
        case R_GRV:
            if (record->event.pressed) {
                SEND_STRING(SS_LSFT("=") " ");
            }
            break;
    }
    return true;
}

void led_set_user(uint8_t usb_led) {

    if (IS_LED_ON(usb_led, USB_LED_NUM_LOCK)) {

    } else {

    }

    if (IS_LED_ON(usb_led, USB_LED_CAPS_LOCK)) {

    } else {

    }

    if (IS_LED_ON(usb_led, USB_LED_SCROLL_LOCK)) {

    } else {

    }

    if (IS_LED_ON(usb_led, USB_LED_COMPOSE)) {

    } else {

    }

    if (IS_LED_ON(usb_led, USB_LED_KANA)) {

    } else {

    }

}
